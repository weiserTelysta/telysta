import{d as E,r as g,a as S,j as i,k as B,o as a,c as t,b as n,e as o,w as N,f as m,v as p,g as d,T as f,l as u,F as T,u as q,h as C,i as U,_ as M}from"./index-CoVPq6PE.js";import{B as R,a as A}from"./BaseHeadNavigationSimple-B4WTcOaJ.js";const F={class:"mainbody"},H={class:"register-container"},$={class:"glass-form"},j={class:"form-group"},D={key:0,class:"error-msg"},I={class:"form-group"},z={key:0,class:"error-msg"},G={class:"form-group"},J={key:0,class:"error-msg"},K={class:"form-group"},L={key:0,class:"error-msg"},O={key:0,type:"submit",class:"submit-btn"},P={key:0},Q={key:1,class:"loader"},W={class:"form-footer"},X=E({__name:"RegisterView",setup(Y){q();const c=g(!1),w=g(!1),e=S({email:"",password:"",confirmpassword:"",username:"",telephone:""}),v=i(()=>!/\S+@\S+\.\S+/.test(e.email)&&e.email!=""),h=i(()=>(e.username.length<3||e.username.length>20)&&e.username!=""),y=i(()=>(e.password.length<8||e.password.length>20)&&e.password!=""),_=i(()=>e.password===e.confirmpassword),V=i(()=>e.email&&e.username.length<60&&e.password.length>=8&&e.password.length<20&&_.value);function b(r){return r.isAxiosError===!0}const k=async()=>{if(V.value)try{c.value=!0;const r=await A.register(e.email,e.username,e.password);console.log("注册成功",r),w.value=!0}catch(r){b(r)?r.response?r.response.data.email?alert(`该邮箱已经被注册：${r.response.data.email[0]}`):alert(`注册失败：${r.response.statusText}`):alert("无法连接到服务器，请检查网络连接"):(console.error("非预期错误类型:",r),alert("系统发生意外错误"))}finally{c.value=!1}};return B(e,(r,s)=>{w.value=!1}),(r,s)=>{const x=C("router-link");return a(),t(T,null,[n(R),o("div",F,[o("div",H,[o("div",$,[s[9]||(s[9]=o("h1",{class:"form-title"},"注册账号",-1)),o("form",{onSubmit:N(k,["prevent"])},[o("div",j,[s[4]||(s[4]=o("label",{for:"email"},"邮箱",-1)),m(o("input",{id:"emial","onUpdate:modelValue":s[0]||(s[0]=l=>e.email=l),type:"email",required:"",placeholder:"请输入注册邮箱"},null,512),[[p,e.email]]),n(f,{name:"fade"},{default:d(()=>[v.value?(a(),t("p",D,"请输入有效的邮箱地址")):u("",!0)]),_:1})]),o("div",I,[s[5]||(s[5]=o("label",{for:"username"},"用户名",-1)),m(o("input",{type:"text",id:"username","onUpdate:modelValue":s[1]||(s[1]=l=>e.username=l),required:"",placeholder:"请输入用户名"},null,512),[[p,e.username]]),n(f,{name:"fade"},{default:d(()=>[h.value?(a(),t("p",z,"用户名长度不能少于3个字符")):u("",!0)]),_:1})]),o("div",G,[s[6]||(s[6]=o("label",{for:"password"},"密码",-1)),m(o("input",{id:"password","onUpdate:modelValue":s[2]||(s[2]=l=>e.password=l),required:"",type:"password",placeholder:"请输入密码",minlength:"8",maxlength:"20",autocomplete:"current-password"},null,512),[[p,e.password]]),n(f,{name:"fade"},{default:d(()=>[y.value?(a(),t("p",J,"密码长度需在6到20个字符之间")):u("",!0)]),_:1})]),o("div",K,[s[7]||(s[7]=o("label",{for:"password"},"确认密码",-1)),m(o("input",{id:"password","onUpdate:modelValue":s[3]||(s[3]=l=>e.confirmpassword=l),required:"",type:"password",placeholder:"请输入密码",minlength:"8",maxlength:"20",autocomplete:"current-password"},null,512),[[p,e.confirmpassword]]),n(f,{name:"fade"},{default:d(()=>[_.value?u("",!0):(a(),t("p",L,"两次输入的密码不一致"))]),_:1})]),w.value?u("",!0):(a(),t("button",O,[c.value?(a(),t("div",Q)):(a(),t("span",P,"立即注册"))])),o("div",W,[n(x,{to:"/login"},{default:d(()=>s[8]||(s[8]=[U("已有账号，登录")])),_:1})])],32)])])])],64)}}}),se=M(X,[["__scopeId","data-v-1ecaed13"]]);export{se as default};
